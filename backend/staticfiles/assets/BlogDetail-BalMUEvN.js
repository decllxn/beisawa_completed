import{b as E,r as s,j as e}from"./index-D2p8YQYs.js";import{a as i}from"./index-DW_MHI2K.js";/* empty css             */import{N as C,F as w}from"./Footer-BvQpiZm2.js";const Y=()=>{const{url:n}=E(),[r,b]=s.useState(null),[l,f]=s.useState([]),[v,S]=s.useState(!0),[c,y]=s.useState(null),[m,u]=s.useState(""),[d,g]=s.useState(""),[h,p]=s.useState(""),[x,j]=s.useState(!1);s.useEffect(()=>{const t=async()=>{try{const a=await i.get(`http://127.0.0.1:8000/blog/api/blogs/${n}/`);b(a.data)}catch(a){y(a),console.error("Error fetching blog details:",a)}finally{S(!1)}},o=async()=>{try{const a=await i.get(`http://127.0.0.1:8000/blog/api/blogs/${n}/comments/`);f(a.data.results||[])}catch(a){console.error("Error fetching comments:",a)}};t(),o()},[n]);const N=async t=>{t.preventDefault(),j(!0);try{(await i.post(`http://127.0.0.1:8000/blog/api/blogs/${n}/comments/`,{name:m,email:d,message:h})).status===201?(alert("Your comment has been submitted and is awaiting approval."),u(""),g(""),p("")):alert("Failed to submit comment. Please try again.")}catch(o){console.error("Error submitting comment:",o),alert("An error occurred while submitting your comment.")}finally{j(!1)}};return v?e.jsx("div",{children:e.jsx("div",{className:"loader-container2",children:e.jsx("div",{className:"loader2"})})}):c?e.jsxs("div",{children:["Error: ",c.message]}):r?e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsxs("div",{className:"blog-detail-container",children:[e.jsx("h1",{children:r.title}),r.image&&e.jsx("img",{src:r.image,alt:r.title,className:"blog-detail-image"}),e.jsx("p",{dangerouslySetInnerHTML:{__html:r.content.replace(/src="\/media\//g,'src="http://127.0.0.1:8000/media/')}}),e.jsx("h2",{children:"Comments"}),e.jsx("div",{className:"comments-section",children:l.length>0?l.map(t=>e.jsxs("div",{className:"comment",children:[e.jsx("h3",{children:t.name}),e.jsx("p",{children:t.message}),e.jsx("p",{className:"comment-date",children:new Date(t.date).toLocaleDateString()})]},t.id)):e.jsx("p",{children:"No comments yet."})}),e.jsxs("div",{className:"comment-form-container",children:[e.jsx("h3",{children:"Leave a Comment"}),e.jsxs("form",{onSubmit:N,className:"comment-form",children:[e.jsx("input",{type:"text",placeholder:"Your Name",value:m,onChange:t=>u(t.target.value),required:!0}),e.jsx("input",{type:"email",placeholder:"Your Email",value:d,onChange:t=>g(t.target.value),required:!0}),e.jsx("textarea",{placeholder:"Your Comment",value:h,onChange:t=>p(t.target.value),required:!0}),e.jsx("button",{type:"submit",disabled:x,children:x?"Submitting...":"Submit"})]})]})]}),e.jsx(w,{})]}):e.jsx("div",{children:"Blog not found."})};export{Y as default};

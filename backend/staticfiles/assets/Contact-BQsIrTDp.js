import{r as c,j as e}from"./index-D2p8YQYs.js";import{N as j,F as g}from"./Footer-BvQpiZm2.js";import{a as f}from"./index-DW_MHI2K.js";const d=async()=>{try{return(await(await fetch("http://127.0.0.1:8000/feedback/csrf/",{credentials:"include"})).json()).csrfToken}catch(s){console.error("Error fetching CSRF token:",s)}},b=()=>{const[s,m]=c.useState({company_name:"",email:"",details:""}),[u,i]=c.useState(""),[x,p]=c.useState("");c.useEffect(()=>{(async()=>{const n=await d();p(n)})();const r=document.querySelectorAll(".input"),a=n=>n.target.parentNode.classList.add("focus"),o=n=>{n.target.value===""&&n.target.parentNode.classList.remove("focus")};return r.forEach(n=>{n.addEventListener("focus",a),n.addEventListener("blur",o)}),()=>{r.forEach(n=>{n.removeEventListener("focus",a),n.removeEventListener("blur",o)})}},[]);const l=t=>{m({...s,[t.target.name]:t.target.value})},h=async t=>{t.preventDefault();const r=await d();if(!r){console.error("CSRF token not found!"),alert("CSRF token is missing. Please refresh the page.");return}try{const a=await f.post("http://127.0.0.1:8000/feedback/api/supplier-engagement/",s,{headers:{"Content-Type":"application/json","X-CSRFToken":r},withCredentials:!0});a.status===201?(i("Supplier engagement details submitted successfully!"),m({company_name:"",email:"",details:""})):(i(`Failed to submit: ${a.status} - ${a.statusText}`),console.error("Server Response:",a.data))}catch(a){i("An error occurred: "+a.message),console.error("Error details:",a)}};return e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"input-container",children:[e.jsx("input",{type:"text",id:"company_name",name:"company_name",className:"input",value:s.company_name,onChange:l,required:!0}),e.jsx("label",{htmlFor:"company_name",children:"Company Name"}),e.jsx("span",{children:"Company Name"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:s.email,onChange:l,required:!0}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("span",{children:"Email"})]}),e.jsxs("div",{className:"input-container textarea",children:[e.jsx("textarea",{id:"details",name:"details",className:"input",value:s.details,onChange:l,required:!0}),e.jsx("label",{htmlFor:"details",children:"Details"}),e.jsx("span",{children:"Details"})]}),e.jsx("input",{type:"submit",value:"Send",className:"btn"}),u&&e.jsx("p",{children:u})]})},v=()=>{const[s,m]=c.useState({company_name:"",email:"",contact_person:"",phone_number:"",onboarding_details:""}),[u,i]=c.useState(""),[x,p]=c.useState("");c.useEffect(()=>{(async()=>{const r=await d();p(r)})()},[]),c.useEffect(()=>{const t=document.querySelectorAll(".input"),r=o=>o.target.parentNode.classList.add("focus"),a=o=>{o.target.value===""&&o.target.parentNode.classList.remove("focus")};return t.forEach(o=>{o.addEventListener("focus",r),o.addEventListener("blur",a)}),()=>{t.forEach(o=>{o.removeEventListener("focus",r),o.removeEventListener("blur",a)})}},[]);const l=t=>{m({...s,[t.target.name]:t.target.value})},h=async t=>{t.preventDefault();const r=await d();if(!r){console.error("CSRF token not found!"),alert("CSRF token is missing. Please try again.");return}try{const a=await f.post("http://127.0.0.1:8000/feedback/api/corporate-onboarding/",s,{headers:{"Content-Type":"application/json","X-CSRFToken":r},withCredentials:!0});a.status===201?(i("Corporate onboarding details submitted successfully!"),m({company_name:"",email:"",contact_person:"",phone_number:"",onboarding_details:""})):i(`Failed to submit: ${a.status} - ${a.statusText}`)}catch(a){i("An error occurred: "+a.message)}};return e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"input-container",children:[e.jsx("input",{type:"text",name:"company_name",className:"input",value:s.company_name,onChange:l,required:!0}),e.jsx("label",{htmlFor:"company_name",children:"Company Name"}),e.jsx("span",{children:"Company Name"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{type:"email",name:"email",className:"input",value:s.email,onChange:l,required:!0}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("span",{children:"Email"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{type:"text",name:"contact_person",className:"input",value:s.contact_person,onChange:l,required:!0}),e.jsx("label",{htmlFor:"contact_person",children:"Contact Person"}),e.jsx("span",{children:"Contact Person"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{type:"tel",name:"phone_number",className:"input",value:s.phone_number,onChange:l,required:!0}),e.jsx("label",{htmlFor:"phone_number",children:"Phone"}),e.jsx("span",{children:"Phone"})]}),e.jsxs("div",{className:"input-container textarea",children:[e.jsx("textarea",{name:"onboarding_details",className:"input",value:s.onboarding_details,onChange:l,required:!0}),e.jsx("label",{htmlFor:"onboarding_details",children:"Onboarding Details"}),e.jsx("span",{children:"Onboarding Details"})]}),e.jsx("input",{type:"submit",value:"Send",className:"btn"}),u&&e.jsx("p",{className:"success-message",children:u})]})},N=()=>{const[s,m]=c.useState({name:"",email:"",feedback:""}),[u,i]=c.useState(""),[x,p]=c.useState("");c.useEffect(()=>{(async()=>{const n=await d();p(n)})();const r=document.querySelectorAll(".input"),a=n=>n.target.parentNode.classList.add("focus"),o=n=>{n.target.value===""&&n.target.parentNode.classList.remove("focus")};return r.forEach(n=>{n.addEventListener("focus",a),n.addEventListener("blur",o)}),()=>{r.forEach(n=>{n.removeEventListener("focus",a),n.removeEventListener("blur",o)})}},[]);const l=t=>{m({...s,[t.target.name]:t.target.value})},h=async t=>{t.preventDefault();const r=await d();if(!r){console.error("CSRF token not found!"),alert("CSRF token is missing. Please refresh the page.");return}try{const a=await f.post("http://127.0.0.1:8000/feedback/api/customer-feedback/",s,{headers:{"Content-Type":"application/json","X-CSRFToken":r},withCredentials:!0});a.status===201?(i("Feedback submitted successfully!"),m({name:"",email:"",feedback:""})):(i(`Failed to submit feedback: ${a.status} - ${a.statusText}`),console.error("Server Response:",a.data))}catch(a){i("An error occurred: "+a.message),console.error("Error details:",a)}};return e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"input-container",children:[e.jsx("input",{id:"name",type:"text",name:"name",className:"input",value:s.name,onChange:l,required:!0}),e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("span",{children:"Name"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("input",{id:"email",type:"email",name:"email",className:"input",value:s.email,onChange:l,required:!0}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("span",{children:"Email"})]}),e.jsxs("div",{className:"input-container textarea",children:[e.jsx("textarea",{id:"feedback",name:"feedback",className:"input",value:s.feedback,onChange:l,required:!0}),e.jsx("label",{htmlFor:"feedback",children:"Feedback"}),e.jsx("span",{children:"Feedback"})]}),e.jsx("button",{type:"submit",className:"btn",children:"Send"}),u&&e.jsx("p",{children:u})]})},C="/assets/logo2-CWqajKUc.jpeg",y=()=>e.jsxs("div",{className:"contact-info",children:[e.jsx("img",{src:C,alt:"company-logo",className:"logo"}),e.jsx("h3",{className:"title",children:"Let's get in touch"}),e.jsx("p",{className:"text",children:"Are you a customer? Supplier? Corporate customer? Your feedback helps us serve you better! We value your insights and invite you to share your thoughts on how we can enhance our partnership."}),e.jsxs("div",{className:"info",children:[e.jsxs("div",{className:"information",children:[e.jsx("div",{className:"icon",children:e.jsx("i",{className:"ri-map-pin-2-line"})}),e.jsx("p",{children:"Meru, Kenya"})]}),e.jsxs("div",{className:"information",children:[e.jsx("div",{className:"icon",children:e.jsx("i",{className:"ri-mail-line"})}),e.jsx("p",{children:"beisawa@gmail.com"})]}),e.jsxs("div",{className:"information",children:[e.jsx("div",{className:"icon",children:e.jsx("i",{className:"ri-phone-line"})}),e.jsx("p",{children:"0712345678"})]})]})]}),F=()=>{const[s,m]=c.useState("feedback"),u=x=>{m(x.target.value)},i=()=>{switch(s){case"supplier":return e.jsx(b,{});case"corporate":return e.jsx(v,{});case"feedback":default:return e.jsx(N,{})}};return e.jsxs("div",{className:"container2",children:[e.jsx("img",{src:"img/shape.png",className:"square",alt:""}),e.jsxs("div",{className:"form2",children:[e.jsx(y,{}),e.jsxs("div",{className:"contact-form",children:[e.jsx("span",{className:"circle one"}),e.jsx("span",{className:"circle two"}),e.jsxs("div",{className:"Outer-Form",children:[e.jsx("h3",{className:"title",children:"Contact Us"}),e.jsx("div",{className:"input-container",children:e.jsxs("select",{className:"input",value:s,onChange:u,children:[e.jsx("option",{value:"supplier",children:"Supplier Engagement"}),e.jsx("option",{value:"corporate",children:"Corporate Onboarding"}),e.jsx("option",{value:"feedback",children:"Feedback"})]})}),i()]})]})]})]})},T=()=>e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx(F,{}),e.jsx(g,{})]});export{T as default};
